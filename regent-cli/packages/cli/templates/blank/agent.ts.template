{{TEMPLATE_IMPORTS}}
import { createAgent } from "@regent/core";
import { http } from "@regent/http";
import { payments, paymentsFromEnv } from "@regent/payments";

{{TEMPLATE_PRE_SETUP}}
const agent = await createAgent({
  name: process.env.AGENT_NAME ?? "my-agent",
  version: process.env.AGENT_VERSION ?? "0.1.0",
  description: process.env.AGENT_DESCRIPTION,
})
  .use(http())
  .use(payments({ config: paymentsFromEnv() }))
  .build();

{{TEMPLATE_POST_SETUP}}

/**
 * Example entrypoint that demonstrates direct invocation and task-based operations.
 *
 * Direct Invocation (synchronous):
 * - Use `agent.a2a?.client.invoke(card, skillId, input)` for immediate results
 * - Returns result immediately, blocks until handler completes
 * - Good for short-running operations
 *
 * Task-Based Operations (asynchronous):
 * - Use `agent.a2a?.client.sendMessage(card, skillId, input)` to create a task
 * - Returns taskId immediately, task runs asynchronously
 * - Poll `agent.a2a?.client.getTask(card, taskId)` to get result
 * - Or subscribe via `agent.a2a?.client.subscribeTask(card, taskId, emit)` for SSE updates
 * - Good for long-running operations or when you need task status tracking
 *
 * Example (Task-Based):
 * ```typescript
 * // Create task
 * const { taskId } = await agent.a2a?.client.sendMessage(card, 'process', input);
 *
 * // Poll for completion
 * let task;
 * while (true) {
 *   task = await agent.a2a?.client.getTask(card, taskId);
 *   if (task.status === 'completed' || task.status === 'failed') break;
 *   await new Promise(resolve => setTimeout(resolve, 100));
 * }
 *
 * if (task.status === 'completed') {
 *   const result = task.result;
 * }
 * ```
 */

